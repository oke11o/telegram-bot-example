Сложно быть с резолвером хэндлера.

Так же надо решить вопрос с валидацией.

И со списками.


Сейчас сделал резолвер хэндлера в состоянии.
Чем это плохо? Что у состояния слишком много ответственности.
Должен быть сервис, который решает какой хэндлер в зависимости от текста, колбека и состояния.


Смущает момент с тем, когда сбрасывать состояние.
Сейчас сбрасывает Response. Может это и норм.


Так же какой-то бардак в классе состояния.
Надо почистить и привести в порядок.